# (C) Andrea Giammarchi @WebReflection
# the esiest way to install jsgtk is opening a terminal
# and writing the following command:
# sh -c "$(curl -fsSL https://webreflection.github.io/jsgtk/mac)"

destdir='/usr/local'
destdirexe="${destdir}/lib/${pkgname}"
destdirlib="${destdir}/bin/${pkgname}"
pkgname=jsgtk
pkgver=$(curl -L https://webreflection.github.io/jsgtk/version)
pkgdir="/tmp/$pkgname-$pkgver"
source="https://webreflection.github.io/jsgtk/archive/${pkgname}-${pkgver}.tar.gz"

echo -e "

  $(tput bold)jsgtk ${pkgver}$(tput sgr0)

    jsgtk runs via $(tput bold)${destdirexe}$(tput sgr0)
    and uses its libraries in $(tput bold)${destdirlib}$(tput sgr0)

  please give this installer privileges to do so:

"
authorized=$(sudo sh -c "echo ${pkgver}")
if [[ $? -ne 0 ]] || [[ "${authorized}" != "${pkgver}" ]]; then
  echo 'sudo password is necessary to install lib and exacutable'
  exit 1
fi

cd $pkgdir
curl -L -O $source
tar -xzvf "${pkgname}-${pkgver}.tar.gz"

sudo mkdir -p "${destdirlib}"
sudo cp -r "${pkgname}/jsgtk_modules" "${destdirlib}"
sudo cp "${pkgname}/${pkgname}.sh" "${destdirexe}"
sudo chmod +x "${destdirexe}"

rm -rf $pkgdir